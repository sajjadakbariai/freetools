<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>فرمت‌کننده JSON - ToolsFree.ir</title>
    <meta name="description" content="ابزار فرمت و زیباسازی کدهای JSON به صورت آنلاین">
    <link rel="stylesheet" href="../../assets/css/main.css">
    <link rel="icon" href="../../assets/images/favicon.ico">
    <style>
        .json-editor-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        @media (min-width: 992px) {
            .json-editor-container {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        .CodeMirror {
            height: 400px;
            border-radius: var(--border-radius-lg);
            font-family: var(--font-mono);
            font-size: 14px;
            line-height: 1.5;
        }
        
        .json-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }
        
        .json-status {
            margin-top: 1rem;
            padding: 0.75rem 1rem;
            border-radius: var(--border-radius-md);
            background-color: var(--bg-color);
        }
        
        .json-status.valid {
            border-right: 3px solid var(--success-color);
        }
        
        .json-status.invalid {
            border-right: 3px solid var(--danger-color);
        }
    </style>
</head>
<body>
    <header class="neumorphic">
        <div class="logo">
            <a href="../../index.html">
                <img src="../../assets/images/logo.png" alt="ToolsFree.ir Logo">
                <span>ToolsFree.ir</span>
            </a>
        </div>
        <nav>
            <ul class="nav-links">
                <li><a href="../../index.html" class="neumorphic-btn">خانه</a></li>
                <li><a href="../../index.html#categories" class="neumorphic-btn">دسته‌بندی ابزارها</a></li>
                <li><a href="../../about.html" class="neumorphic-btn">درباره ما</a></li>
            </ul>
        </nav>
        <div class="mobile-menu-btn neumorphic">
            <i class="icon-menu"></i>
        </div>
    </header>

    <main class="tool-container">
        <div class="tool-header neumorphic">
            <div class="tool-icon">
                <i class="icon-json"></i>
            </div>
            <div class="tool-info">
                <h1>فرمت‌کننده JSON</h1>
                <p>ابزار فرمت و زیباسازی کدهای JSON به صورت آنلاین</p>
            </div>
        </div>
        
        <div class="tool-body neumorphic">
            <div class="tool-description">
                <p>با استفاده از این ابزار می‌توانید کدهای JSON خود را مرتب و خوانا کنید یا برعکس، آنها را فشرده نمایید. همچنین امکان اعتبارسنجی ساختار JSON نیز وجود دارد.</p>
            </div>
            
            <div class="json-editor-container">
                <div class="json-input">
                    <h3 class="section-title">ورودی JSON</h3>
                    <textarea id="json-raw" class="neumorphic-inset" placeholder='{"name":"John","age":30,"city":"New York"}'></textarea>
                </div>
                
                <div class="json-output">
                    <h3 class="section-title">نتیجه فرمت شده</h3>
                    <div id="json-formatted" class="neumorphic-inset"></div>
                </div>
            </div>
            
            <div class="json-actions">
                <button id="format-btn" class="btn btn-primary neumorphic">
                    <i class="icon-format"></i> فرمت کن
                </button>
                <button id="minify-btn" class="btn btn-accent neumorphic">
                    <i class="icon-minify"></i> فشرده کن
                </button>
                <button id="validate-btn" class="btn btn-info neumorphic">
                    <i class="icon-validate"></i> اعتبارسنجی
                </button>
                <button id="clear-btn" class="btn btn-danger neumorphic">
                    <i class="icon-clear"></i> پاک کردن
                </button>
                <button id="copy-btn" class="btn btn-success neumorphic">
                    <i class="icon-copy"></i> کپی نتیجه
                </button>
                <button id="download-btn" class="btn btn-secondary neumorphic">
                    <i class="icon-download"></i> دانلود فایل
                </button>
                <button id="sample-btn" class="btn btn-outline neumorphic">
                    <i class="icon-sample"></i> نمونه JSON
                </button>
            </div>
            
            <div id="json-status" class="json-status">
                <p>برای شروع، JSON خود را در کادر ورودی قرار دهید.</p>
            </div>
        </div>
        
        <div class="tool-info neumorphic">
            <h3><i class="icon-help"></i> راهنمای استفاده</h3>
            <div class="info-content">
                <div class="info-step">
                    <h4>1. وارد کردن JSON</h4>
                    <p>کد JSON خود را در کادر سمت راست وارد کنید یا از دکمه "نمونه JSON" استفاده نمایید.</p>
                </div>
                <div class="info-step">
                    <h4>2. فرمت یا فشرده کردن</h4>
                    <p>برای مرتب کردن کد از دکمه "فرمت کن" و برای فشرده کردن از دکمه "فشرده کن" استفاده کنید.</p>
                </div>
                <div class="info-step">
                    <h4>3. اعتبارسنجی</h4>
                    <p>با کلیک روی دکمه "اعتبارسنجی" از صحت ساختار JSON خود مطمئن شوید.</p>
                </div>
                <div class="info-step">
                    <h4>4. ذخیره نتیجه</h4>
                    <p>می‌توانید نتیجه را کپی کنید یا به صورت فایل JSON دانلود نمایید.</p>
                </div>
            </div>
            
            <div class="info-tips">
                <h4><i class="icon-tip"></i> نکات فنی</h4>
                <ul>
                    <li>JSON باید با آکولاد باز شود <code>{</code> یا براکت باز <code>[</code></li>
                    <li>کلیدها باید در دبل کوتیشن قرار گیرند <code>"key"</code></li>
                    <li>مقادیر می‌توانند رشته، عدد، بولین، null، آبجکت یا آرایه باشند</li>
                </ul>
            </div>
        </div>
    </main>

    <footer class="neumorphic">
        <div class="footer-content">
            <div class="footer-section">
                <h3>درباره ToolsFree.ir</h3>
                <p>مجموعه‌ای از ابزارهای رایگان و آنلاین برای توسعه‌دهندگان و طراحان</p>
            </div>
            <div class="footer-section">
                <h3>لینک‌های مفید</h3>
                <ul>
                    <li><a href="../../privacy-policy.html">حریم خصوصی</a></li>
                    <li><a href="../../terms.html">قوانین استفاده</a></li>
                    <li><a href="../../contact.html">تماس با ما</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>ابزارهای مرتبط</h3>
                <ul>
                    <li><a href="../validators/json-validator.html">اعتبارسنج JSON</a></li>
                    <li><a href="xml-to-json.html">مبدل XML به JSON</a></li>
                    <li><a href="../coding/json-diff.html">مقایسه‌کننده JSON</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            <p>© <span id="current-year"></span> ToolsFree.ir - تمام حقوق محفوظ است</p>
        </div>
    </footer>

    <!-- کتابخانه CodeMirror برای هایلایت سینتکس -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    
    <script src="../../assets/js/tools/converters/json-formatter.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // مقداردهی سال جاری در فوتر
            document.getElementById('current-year').textContent = new Date().getFullYear();
            
            // مقداردهی ادیتور CodeMirror
            const editor = CodeMirror(document.getElementById('json-formatted'), {
                mode: 'javascript',
                theme: 'dracula',
                lineNumbers: true,
                readOnly: true,
                lineWrapping: true,
                indentUnit: 4
            });
            
            // رویدادهای دکمه‌ها
            document.getElementById('format-btn').addEventListener('click', formatJSON);
            document.getElementById('minify-btn').addEventListener('click', minifyJSON);
            document.getElementById('validate-btn').addEventListener('click', validateJSON);
            document.getElementById('clear-btn').addEventListener('click', clearJSON);
            document.getElementById('copy-btn').addEventListener('click', copyJSON);
            document.getElementById('download-btn').addEventListener('click', downloadJSON);
            document.getElementById('sample-btn').addEventListener('click', loadSample);
            
            // تابع نمایش نوتیفیکیشن
            function showToast(message, type = 'success') {
                const toast = document.createElement('div');
                toast.className = `toast-notification ${type}`;
                toast.textContent = message;
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.classList.add('show');
                }, 100);
                
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => {
                        toast.remove();
                    }, 300);
                }, 3000);
            }
            
            // توابع مربوط به JSON
            function formatJSON() {
                try {
                    const input = document.getElementById('json-raw').value;
                    if (!input.trim()) {
                        showToast('لطفاً JSON را وارد کنید', 'error');
                        return;
                    }
                    
                    const formatted = JSONFormatter.format(input);
                    editor.setValue(formatted);
                    document.getElementById('json-status').className = 'json-status valid';
                    document.getElementById('json-status').innerHTML = '<p><i class="icon-check"></i> JSON معتبر است و با موفقیت فرمت شد.</p>';
                    showToast('JSON با موفقیت فرمت شد');
                } catch (error) {
                    document.getElementById('json-status').className = 'json-status invalid';
                    document.getElementById('json-status').innerHTML = `<p><i class="icon-error"></i> خطا در پردازش JSON: ${error.message}</p>`;
                    showToast('خطا در فرمت JSON', 'error');
                }
            }
            
            // سایر توابع...
        });
    </script>
</body>
</html>
